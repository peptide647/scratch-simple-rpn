# 試製八五式逆波蘭電算機

これはScratchで製作した[RPN電卓](https://scratch.mit.edu/projects/1143719702/)をTurbowarp Packagerでパッケージ化したものです。


## 概要
Scratchで製作したRPN電卓（逆ポーランド電卓）アプリです。

TurbowarpでHTML化し、monacaを使用してスマホアプリにすることを想定して作成しました。

## 仕様、使い方
キー入力方法は、通常のRPN電卓と同じです。スタックはおそらく無限です。

計算結果の部分には、現在入力中の最新のスタックと、その一つ上のスタックが表示されます。一番大きい「ENTER」キーを押すと、現在入力中の数字が一つ上のスタックに反映されます。

計算結果の表示部をタップすると、最新の8個分のスタックの内容が表示されます。もう一度タップするともとの表示に戻ります。スタックをドラッグして並び替えたりすることはできません。

赤い「AC」キーを押すと、すべてのスタックが消去されます。その右の「C」キーを押すと最新のスタックが消去され0になります。

表示桁数は10桁です。計算結果が10桁以上になったり、0.000000001以下になったりするとエラーとなり、計算結果の数字が赤くなるか「Error」と表示されます。その状態で何かキーを押すと0になり、そのまま計算を続行することはできません。

一番上の、黄色い「DROP」キーを押すと、最新のスタックが消えて一つ上のスタックが落ちてきます。

「DROP」キーの隣の、黄色い「X⇆Y」キーを押すと、最新のスタックと一つ上のスタックの中身が入れ替わります。

以下気にしなくてもいい詳細な仕様
- ゼロ除算はできません（最新のスタックが0の場合、÷ボタンは反応しません。エラー表示にもなりません）
- スタック数はおそらく無限と書きましたが、Scratchの仕様上200000個の上限があります。それ以上入れようとしたらどうなるかは知りませんが、普通に計算していたら200000個も使わないので事実上無限といって差し支えないでしょう。
- スマホアプリ化を念頭に置いて制作されたため、Scratch上で見ると一番下のボタンが画面端と少し被ったり、レイアウトがイマイチになっています。Scratchの解像度は480×360ですが、スマホアプリ化するときは216×384で表示するように設計しています。実際に表示されるときはそれ以上の解像度が出ていますが。これはTurbowarpの機能によるものです。
- また、スマホアプリ化が前提だったため、キーボード入力には対応していません。すべてタップで行う必要があります。

## 注意点
Scratchの計算ブロックをそのまま使っているので、浮動小数点演算の誤差が出ます。また、すべての小数は全体の桁数が10桁になるように切り捨てられるので、例えば(10/3)*3は9.999999999になったりします。

この例以外にも小数を扱うときは正確でない計算結果が出ることがあるようです。正確な計算が必要なときには、誤差が出ない他の電卓を使ってください :-P

## 変更履歴
ver1.00　だいたい完成。動作試験のためとりあえずスマホアプリ化。

ver1.01　少数が無限に打ち込めてしまうのを修正。
